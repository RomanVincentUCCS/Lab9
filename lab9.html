<!DOCTYPE html>
<html>
<head>
  <title>Japan Birth Rate Chart</title>
  <meta charset="utf-8" />
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dimple/2.3.0/dimple.latest.min.js"></script>
  <style>
    #chartContainer {
      width: 840px;
      margin: auto;
      margin-top: 50px;
    }
    #charttitle {
      font: bold 22px Verdana, sans-serif;
      margin-left: 60px;
    }
    #chartsubhead {
      margin-left: 60px;
      font-family: Verdana, sans-serif;
    }
  </style>
</head>
<body>
  <div id="chartContainer">
    <p id="charttitle">Japan Birth Rates</p>
    <p id="chartsubhead">The Decline (2007â€“2022)</p>
  </div>

  <script>
    var svg = dimple.newSvg("#chartContainer", 840, 440);

    d3.csv("https://raw.githubusercontent.com/RomanVincentUCCS/Lab9/main/japan_birth.csv", function(data) {
      data.forEach(function(d) {
        // Adjust column names based on your CSV's headers
        d["Year"] = +d["Year"];
        d["Birth Rate"] = +d["Birth Rate"];
      });

      var filtered = data.filter(function(d) {
        return d["Year"] >= 2007 && d["Year"] <= 2022;
      });

      // Convert year to string for category axis
      filtered.forEach(function(d) {
        d["Year"] = d["Year"].toString();
      });

      var chart = new dimple.chart(svg, filtered);
      chart.setBounds(60, 30, 700, 300);

      var x = chart.addCategoryAxis("x", "year");
      x.addOrderRule("Year");

      var y = chart.addMeasureAxis("y", "birth_rate");
      y.overrideMax = 9;
      y.title = "Births per 1,000 People";

      var s = chart.addSeries(null, dimple.plot.line);
      s.lineWeight = 3;
      s.lineMarkers = true;

      chart.draw();
    });
  </script>
</body>
</html>
